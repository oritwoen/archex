pkgname=accountsservice

arch=(x86_64)
pkgver=24.27.62+791+4d57fd3
pkgrel=90

b2sums=(SKIP SKIP)
source=(
	accounts-daemon-restart.hook
	git+https://gitlab.freedesktop.org/accountsservice/accountsservice.git
)

#provides=(libaccountsservice.so)

pkgver() {
	cd $pkgname

	local _version=$( ./generate-version.sh)
	local _commits=$(git rev-list --count HEAD)
	local _commith=$(git rev-parse --short HEAD)

	echo ${_version}+${_commits}+${_commith}
}

build() {
	local options=(
		-D admin_group=wheel
	)
	
	arch-meson $pkgname build "${options[@]}"
	meson compile -C build
}

package() {
	meson install -C build --destdir "$pkgdir"
	
	install -Dt "$pkgdir/usr/share/libalpm/hooks" -m644 *.hook
	install -d "$pkgdir/usr/share/accountsservice/interfaces"
}
